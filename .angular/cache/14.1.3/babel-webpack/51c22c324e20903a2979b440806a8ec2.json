{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/mithil.baria/Downloads/Food (2)/Food/foodOrder/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ChangeDetectorRef } from '@angular/core';\nimport { Keto } from '../shared/models/keto';\nimport { Nutrition } from './nutrition';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/cart.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../services/food/ketopage.service\";\nimport * as i5 from \"../services/food/vegan-page.service\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../shared/models/keto\";\n\nfunction CartPageComponent_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\")(1, \"div\");\n    i0.ɵɵelement(2, \"img\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"a\", 9);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\")(7, \"select\", 10, 11);\n    i0.ɵɵlistener(\"change\", function CartPageComponent_li_3_Template_select_change_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const cartItem_r2 = restoredCtx.$implicit;\n\n      const _r3 = i0.ɵɵreference(8);\n\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.changeQuantity(cartItem_r2, _r3.value));\n    });\n    i0.ɵɵelementStart(9, \"option\");\n    i0.ɵɵtext(10, \"1\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"option\");\n    i0.ɵɵtext(12, \"2\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"option\");\n    i0.ɵɵtext(14, \"3\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"option\");\n    i0.ɵɵtext(16, \"4\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"option\");\n    i0.ɵɵtext(18, \"5\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"option\");\n    i0.ɵɵtext(20, \"6\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"div\");\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"div\")(25, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function CartPageComponent_li_3_Template_button_click_25_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const cartItem_r2 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.removeFromCart(cartItem_r2));\n    });\n    i0.ɵɵtext(26, \" Remove \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const cartItem_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", cartItem_r2.food.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", cartItem_r2.food.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/food/\", cartItem_r2.food.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", cartItem_r2.food.name, \" \");\n    i0.ɵɵadvance(17);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(23, 5, cartItem_r2.price, \"INR\"), \" \");\n  }\n}\n\nfunction CartPageComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"table\")(2, \"tbody\")(3, \"tr\")(4, \"th\");\n    i0.ɵɵtext(5, \"Carbs\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"tr\")(9, \"th\");\n    i0.ɵɵtext(10, \"Protein\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\");\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"tr\")(14, \"th\");\n    i0.ɵɵtext(15, \"Fat\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"td\");\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"tr\")(19, \"th\");\n    i0.ɵɵtext(20, \"Total Calories\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\");\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.nutrition.carbs, \" g\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.nutrition.protein, \" g\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.nutrition.fat, \" g\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r1.nutrition.calories, \" kcals\");\n  }\n}\n\nexport class CartPageComponent {\n  constructor(cartService, router, location, ar, change, ketoser, ketoAdd, cgf, veganService) {\n    this.cartService = cartService;\n    this.router = router;\n    this.location = location;\n    this.ar = ar;\n    this.change = change;\n    this.ketoser = ketoser;\n    this.ketoAdd = ketoAdd;\n    this.cgf = cgf;\n    this.veganService = veganService;\n    this.cart = {};\n    this.ketocompt = {};\n    this.cartpayload = {};\n    this.today = new Date();\n    this.cartIntr = {}; // public ketoAdd = {} as  Keto\n\n    this.login = {};\n    this.dd = String(this.today.getDate()).padStart(2, '0');\n    this.mm = String(this.today.getMonth() + 1).padStart(2, '0'); //January is 0!\n\n    this.yyyy = this.today.getFullYear();\n    this.today1 = this.mm + '/' + this.dd + '/' + this.yyyy;\n    this.vegan = {};\n    this.nutri = new Nutrition();\n    this.nutrition = new Nutrition();\n    this.cal = 0;\n    this.prot = 0;\n    this.carbs = 0;\n    this.fat = 0;\n    this.setCart();\n  }\n\n  ngOnInit() {}\n\n  setCart() {\n    this.cart = this.cartService.getCart();\n    this.cartpayload.items = this.cart.items;\n    this.cartpayload.total = this.cart.totalPrice;\n    this.cartpayload.orderDate = this.today1; // cartIntr\n\n    this.cartIntr.items = this.cart.items;\n    this.cartIntr.total = this.cart.totalPrice;\n    this.cartIntr.orderDate = this.today1;\n    this.cartIntr.userId = this.cartService.userId;\n  }\n\n  removeFromCart(cartItem) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      let keto = new Keto();\n      let nutri_remove = new Nutrition();\n\n      _this.cartService.removeFromCart(cartItem.food.id); //this.setCart();\n\n\n      let id = _this.cart.items.filter(num => num.food.id > 20);\n\n      console.log(cartItem.food.id);\n      console.log(id[0]);\n\n      _this.ar.params.subscribe(params => {\n        if (cartItem.food.id > 20 && cartItem.food.id < 35) {\n          console.log(\"const\");\n          keto = _this.ketoser.getKetoById(cartItem.food.id);\n          _this.nutri = _this.cartService.removeDetails(keto, _this.nutri);\n        } else if (cartItem.food.id > 34) {\n          nutri_remove = _this.veganService.getVeganById(cartItem.food.id);\n          _this.nutri = _this.cartService.removeDetails(nutri_remove, _this.nutri);\n        }\n      });\n\n      _this.nutrition = _this.nutri;\n      console.log(_this.nutrition);\n    })();\n  }\n\n  changeQuantity(cartItem, quantityInString) {\n    const quantity = parseInt(quantityInString);\n    this.cartService.changeQuantity(cartItem.food.id, quantity);\n    this.setCart();\n  }\n\n  confirmOrder() {\n    this.cartService.confirmOrder(this.cartIntr).subscribe(response => {\n      console.log(response);\n      alert(response);\n      this.router.navigateByUrl(\"/home\");\n    }, error => {\n      alert(error);\n    });\n  }\n\n  displayNutrition() {\n    const id = this.cart.items.filter(num => num.food.id > 20);\n\n    if (id === null || id === undefined) {\n      return false;\n    }\n\n    console.log(id);\n\n    if (id != null && id != undefined) {\n      for (let i = 0; i < id.length; i++) {\n        this.ar.params.subscribe(params => {\n          if (id[i].food.id > 20 && id[i].food.id < 35) {\n            this.ketoAdd = this.ketoser.getKetoById(id[i].food.id);\n            this.nutri = this.cartService.addDetails(this.ketoAdd, this.nutri);\n          } else if (id[i].food.id > 34) {\n            this.vegan = this.veganService.getVeganById(id[i].food.id);\n            console.log(this.vegan);\n            this.nutri = this.cartService.addDetails(this.vegan, this.nutri);\n            console.log(this.nutri);\n          }\n        });\n      }\n\n      this.nutrition = this.nutri;\n    }\n\n    return true;\n  }\n\n}\n\nCartPageComponent.ɵfac = function CartPageComponent_Factory(t) {\n  return new (t || CartPageComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i4.KetopageService), i0.ɵɵdirectiveInject(Keto), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i5.VeganPageService));\n};\n\nCartPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartPageComponent,\n  selectors: [[\"app-cart-page\"]],\n  decls: 14,\n  vars: 7,\n  consts: [[3, \"ngSubmit\"], [1, \"container\"], [4, \"ngFor\", \"ngForOf\"], [1, \"checkout\"], [1, \"food-count\"], [1, \"total-price\"], [4, \"ngIf\"], [\"type\", \"submit\"], [3, \"src\", \"alt\"], [3, \"routerLink\"], [3, \"change\"], [\"quantitySelect\", \"\"], [1, \"remove-button\", 3, \"click\"]],\n  template: function CartPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function CartPageComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.confirmOrder();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"ul\");\n      i0.ɵɵtemplate(3, CartPageComponent_li_3_Template, 27, 8, \"li\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4);\n      i0.ɵɵtext(6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"div\", 5);\n      i0.ɵɵtext(8);\n      i0.ɵɵpipe(9, \"currency\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, CartPageComponent_div_10_Template, 23, 4, \"div\", 6);\n      i0.ɵɵelementStart(11, \"div\")(12, \"button\", 7);\n      i0.ɵɵtext(13, \"CONFIRM ORDER\");\n      i0.ɵɵelementEnd()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.cart.items);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", ctx.cart.items.length, \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(9, 4, ctx.cart.totalPrice, \"INR\"), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayNutrition());\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i2.RouterLinkWithHref, i6.ɵNgNoValidate, i6.NgSelectOption, i6.ɵNgSelectMultipleOption, i6.NgControlStatusGroup, i6.NgForm, i3.CurrencyPipe],\n  styles: [\".container[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-wrap: wrap;\\r\\n    align-items: flex-start;\\r\\n    margin: 1.5rem;\\r\\n}\\r\\nul[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    flex: 3 0;\\r\\n    border: 1px solid #ffbbbb;\\r\\n    border-radius: 1rem;\\r\\n    margin: .5rem;\\r\\n    padding: 0;\\r\\n    list-style-type: none;\\r\\n    justify-content: space-evenly;\\r\\n\\r\\n}\\r\\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-wrap: wrap;\\r\\n    justify-content: space-around;\\r\\n    align-items: center;\\r\\n    border-bottom: 1px solid #ffbbbb;\\r\\n\\r\\n}\\r\\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{\\r\\n    border: none;\\r\\n}\\r\\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{\\r\\n    height: 5rem;\\r\\n    width: 5rem;\\r\\n    border-radius: 100rem;\\r\\n    object-fit: cover;\\r\\n}\\r\\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{\\r\\n    padding: 1rem;\\r\\n}\\r\\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:not(:first-child){\\r\\nflex-basis: 18%;\\r\\n}\\r\\nul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{\\r\\n    width: 4rem;\\r\\n    border: none;\\r\\n    outline: none;\\r\\n    border-bottom: 1px solid lightcoral;\\r\\n    font-weight: 100;\\r\\n}\\r\\nul[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{\\r\\n    border-radius: 1rem;\\r\\n    border: none;\\r\\n    outline: none;\\r\\n    padding: .5rem;\\r\\n    opacity: .7;\\r\\n    color: #e72929;\\r\\n}\\r\\nul[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{\\r\\n    opacity: 1;\\r\\n    cursor: pointer;\\r\\n\\r\\n}\\r\\n.checkout[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    justify-content: space-between;\\r\\n    align-items: center;\\r\\n    flex: 1 3;\\r\\n    height: 20rem;\\r\\n    border: 1px solid #ffbbbb;\\r\\n    border-radius: 1rem;\\r\\n    padding: .5rem;\\r\\n    margin: .5rem;\\r\\n}\\r\\n.checkout[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex: 3;\\r\\n    flex-direction: column;\\r\\n    align-items: flex-start;\\r\\n    justify-content: center;\\r\\n    margin: 1rem;\\r\\n    font-size: 1rem;\\r\\n    color: rgb(255, 180, 42);\\r\\n}\\r\\n.checkout[_ngcontent-%COMP%]   .food-count[_ngcontent-%COMP%]{\\r\\n    margin-bottom: 1rem;\\r\\n}\\r\\n.checkout[_ngcontent-%COMP%]   .food-count[_ngcontent-%COMP%]::before{\\r\\n    content: 'Total Items';\\r\\n    color: gray;\\r\\n}\\r\\n.checkout[_ngcontent-%COMP%]   .total-price[_ngcontent-%COMP%]::before{\\r\\n    content: 'Total Price';\\r\\n    color: gray;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNhcnQtcGFnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLGVBQWU7SUFDZix1QkFBdUI7SUFDdkIsY0FBYztBQUNsQjtBQUNBO0lBQ0ksYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixTQUFTO0lBQ1QseUJBQXlCO0lBQ3pCLG1CQUFtQjtJQUNuQixhQUFhO0lBQ2IsVUFBVTtJQUNWLHFCQUFxQjtJQUNyQiw2QkFBNkI7O0FBRWpDO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsZUFBZTtJQUNmLDZCQUE2QjtJQUM3QixtQkFBbUI7SUFDbkIsZ0NBQWdDOztBQUVwQztBQUNBO0lBQ0ksWUFBWTtBQUNoQjtBQUNBO0lBQ0ksWUFBWTtJQUNaLFdBQVc7SUFDWCxxQkFBcUI7SUFDckIsaUJBQWlCO0FBQ3JCO0FBQ0E7SUFDSSxhQUFhO0FBQ2pCO0FBQ0E7QUFDQSxlQUFlO0FBQ2Y7QUFDQTtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osYUFBYTtJQUNiLG1DQUFtQztJQUNuQyxnQkFBZ0I7QUFDcEI7QUFDQTtJQUNJLG1CQUFtQjtJQUNuQixZQUFZO0lBQ1osYUFBYTtJQUNiLGNBQWM7SUFDZCxXQUFXO0lBQ1gsY0FBYztBQUNsQjtBQUNBO0lBQ0ksVUFBVTtJQUNWLGVBQWU7O0FBRW5CO0FBRUE7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLDhCQUE4QjtJQUM5QixtQkFBbUI7SUFDbkIsU0FBUztJQUNULGFBQWE7SUFDYix5QkFBeUI7SUFDekIsbUJBQW1CO0lBQ25CLGNBQWM7SUFDZCxhQUFhO0FBQ2pCO0FBQ0E7SUFDSSxhQUFhO0lBQ2IsT0FBTztJQUNQLHNCQUFzQjtJQUN0Qix1QkFBdUI7SUFDdkIsdUJBQXVCO0lBQ3ZCLFlBQVk7SUFDWixlQUFlO0lBQ2Ysd0JBQXdCO0FBQzVCO0FBQ0E7SUFDSSxtQkFBbUI7QUFDdkI7QUFDQTtJQUNJLHNCQUFzQjtJQUN0QixXQUFXO0FBQ2Y7QUFDQTtJQUNJLHNCQUFzQjtJQUN0QixXQUFXO0FBQ2YiLCJmaWxlIjoiY2FydC1wYWdlLmNvbXBvbmVudC5jc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuY29udGFpbmVye1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXgtd3JhcDogd3JhcDtcclxuICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gICAgbWFyZ2luOiAxLjVyZW07XHJcbn1cclxudWx7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGZsZXg6IDMgMDtcclxuICAgIGJvcmRlcjogMXB4IHNvbGlkICNmZmJiYmI7XHJcbiAgICBib3JkZXItcmFkaXVzOiAxcmVtO1xyXG4gICAgbWFyZ2luOiAuNXJlbTtcclxuICAgIHBhZGRpbmc6IDA7XHJcbiAgICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWV2ZW5seTtcclxuXHJcbn1cclxudWwgbGl7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgZmxleC13cmFwOiB3cmFwO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNmZmJiYmI7XHJcblxyXG59XHJcbnVsIGxpOmxhc3QtY2hpbGR7XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbn1cclxudWwgbGkgaW1ne1xyXG4gICAgaGVpZ2h0OiA1cmVtO1xyXG4gICAgd2lkdGg6IDVyZW07XHJcbiAgICBib3JkZXItcmFkaXVzOiAxMDByZW07XHJcbiAgICBvYmplY3QtZml0OiBjb3ZlcjtcclxufVxyXG51bCBsaSBkaXZ7XHJcbiAgICBwYWRkaW5nOiAxcmVtO1xyXG59XHJcbnVsIGxpIGRpdjpub3QoOmZpcnN0LWNoaWxkKXtcclxuZmxleC1iYXNpczogMTglO1xyXG59XHJcbnVsIGxpIHNlbGVjdHtcclxuICAgIHdpZHRoOiA0cmVtO1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgb3V0bGluZTogbm9uZTtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCBsaWdodGNvcmFsO1xyXG4gICAgZm9udC13ZWlnaHQ6IDEwMDtcclxufVxyXG51bCAucmVtb3ZlLWJ1dHRvbntcclxuICAgIGJvcmRlci1yYWRpdXM6IDFyZW07XHJcbiAgICBib3JkZXI6IG5vbmU7XHJcbiAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgcGFkZGluZzogLjVyZW07XHJcbiAgICBvcGFjaXR5OiAuNztcclxuICAgIGNvbG9yOiAjZTcyOTI5O1xyXG59XHJcbnVsIC5yZW1vdmUtYnV0dG9uOmhvdmVye1xyXG4gICAgb3BhY2l0eTogMTtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuXHJcbn1cclxuXHJcbi5jaGVja291dHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIGZsZXg6IDEgMztcclxuICAgIGhlaWdodDogMjByZW07XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjZmZiYmJiO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMXJlbTtcclxuICAgIHBhZGRpbmc6IC41cmVtO1xyXG4gICAgbWFyZ2luOiAuNXJlbTtcclxufVxyXG4uY2hlY2tvdXQ+ZGl2e1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGZsZXg6IDM7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIG1hcmdpbjogMXJlbTtcclxuICAgIGZvbnQtc2l6ZTogMXJlbTtcclxuICAgIGNvbG9yOiByZ2IoMjU1LCAxODAsIDQyKTtcclxufVxyXG4uY2hlY2tvdXQgLmZvb2QtY291bnR7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAxcmVtO1xyXG59XHJcbi5jaGVja291dCAuZm9vZC1jb3VudDo6YmVmb3Jle1xyXG4gICAgY29udGVudDogJ1RvdGFsIEl0ZW1zJztcclxuICAgIGNvbG9yOiBncmF5O1xyXG59XHJcbi5jaGVja291dCAudG90YWwtcHJpY2U6OmJlZm9yZXtcclxuICAgIGNvbnRlbnQ6ICdUb3RhbCBQcmljZSc7XHJcbiAgICBjb2xvcjogZ3JheTtcclxufSJdfQ== */\"],\n  changeDetection: 0\n});","map":{"version":3,"mappings":"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","names":["ChangeDetectorRef","Keto","Nutrition","i0","cartItem_r2","CartPageComponent","constructor","cartService","router","location","ar","change","ketoser","ketoAdd","cgf","veganService","Date","String","today","getDate","padStart","getMonth","getFullYear","mm","dd","yyyy","setCart","ngOnInit","cart","getCart","cartpayload","items","total","totalPrice","orderDate","today1","cartIntr","userId","removeFromCart","cartItem","keto","nutri_remove","food","id","filter","num","console","log","params","subscribe","getKetoById","nutri","removeDetails","getVeganById","nutrition","changeQuantity","quantityInString","quantity","parseInt","confirmOrder","response","alert","navigateByUrl","error","displayNutrition","undefined","i","length","addDetails","vegan","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\mithil.baria\\Downloads\\Food (2)\\Food\\foodOrder\\src\\app\\cart-page\\cart-page.component.ts","C:\\Users\\mithil.baria\\Downloads\\Food (2)\\Food\\foodOrder\\src\\app\\cart-page\\cart-page.component.html"],"sourcesContent":["import { Location } from '@angular/common';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, Inject, Input, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { delay } from 'rxjs';\nimport { LoginComponent } from '../auth/login/login.component';\nimport { KetoComponent } from '../keto/keto.component';\nimport { KetopageComponent } from '../ketopage/ketopage.component';\nimport { CartService } from '../services/cart.service';\nimport { KetopageService } from '../services/food/ketopage.service';\nimport { VeganPageService } from '../services/food/vegan-page.service';\nimport { cart } from '../shared/models/cart';\nimport { CartItem } from '../shared/models/cartItem';\nimport { Keto } from '../shared/models/keto';\nimport { Vegan } from '../shared/models/vegan';\nimport { CartPayload } from './cart-payload';\nimport { Nutrition } from './nutrition';\nimport { cartIntr } from './temp-cart-intr';\n\n@Component({\n  selector: 'app-cart-page',\n  templateUrl: './cart-page.component.html',\n  styleUrls: ['./cart-page.component.css'],\n  changeDetection:ChangeDetectionStrategy.OnPush\n})\nexport class CartPageComponent implements OnInit {\n  cart = {} as cart;\n  ketocompt = {} as KetopageComponent;\n  cartpayload = {} as CartPayload;\n  public today = new Date();\n  cartIntr = {} as cartIntr;\n  // public ketoAdd = {} as  Keto\n  public login = {} as LoginComponent;\n  public userId!: number;\n  public dd = String(this.today.getDate()).padStart(2, '0');\n  mm = String(this.today.getMonth() + 1).padStart(2, '0'); //January is 0!\n  yyyy = this.today.getFullYear();\n  today1 = this.mm + '/' + this.dd + '/' + this.yyyy;\n  constructor(private cartService: CartService, private router: Router, private location: Location,\n    private ar: ActivatedRoute,private change:ChangeDetectorRef,\n    private ketoser: KetopageService, @Inject(Keto) private ketoAdd: Keto, private cgf: ChangeDetectorRef,\n    private veganService: VeganPageService) {\n    this.setCart();\n  }\n\n  public vegan = {} as Vegan\n  public nutri = new Nutrition();\n\n\n  public nutrition = new Nutrition();\n  ngOnInit(): void {\n\n  }\n  public cal = 0;\n  public prot = 0;\n  public carbs = 0;\n  public fat = 0;\n  setCart() {\n    this.cart = this.cartService.getCart();\n    this.cartpayload.items = this.cart.items;\n    this.cartpayload.total = this.cart.totalPrice;\n    this.cartpayload.orderDate = this.today1;\n\n    // cartIntr\n    this.cartIntr.items = this.cart.items;\n    this.cartIntr.total = this.cart.totalPrice;\n    this.cartIntr.orderDate = this.today1;\n    this.cartIntr.userId = this.cartService.userId;\n\n  }\n\n  async removeFromCart(cartItem: CartItem) {\n    let keto = new Keto();\n    let nutri_remove = new Nutrition();\n    this.cartService.removeFromCart(cartItem.food.id);\n    //this.setCart();\n    let id = this.cart.items.filter(num => num.food.id > 20);\n    console.log(cartItem.food.id);\n    console.log(id[0]);\n    this.ar.params.subscribe((params) => {\n      if (cartItem.food.id>20 && cartItem.food.id<35) {\n        console.log(\"const\");\n        keto = this.ketoser.getKetoById(cartItem.food.id);\n        this.nutri = this.cartService.removeDetails(keto,this.nutri);\n      }else if(cartItem.food.id>34){\n        nutri_remove = this.veganService.getVeganById(cartItem.food.id);\n        this.nutri = this.cartService.removeDetails(nutri_remove,this.nutri);\n      }\n    })\n    this.nutrition = this.nutri;\n    console.log(this.nutrition);\n  }\n  changeQuantity(cartItem: CartItem, quantityInString: string) {\n    const quantity = parseInt(quantityInString);\n    this.cartService.changeQuantity(cartItem.food.id, quantity);\n    this.setCart();\n  }\n  confirmOrder() {\n    this.cartService.confirmOrder(this.cartIntr).subscribe(\n      (response: CartPayload) => {\n        console.log(response);\n        alert(response);\n        this.router.navigateByUrl(\"/home\");\n      }, (error: HttpErrorResponse) => {\n        alert(error);\n      }\n    )\n  }\n\n\n  displayNutrition(): boolean {\n    const id = this.cart.items.filter(num => num.food.id > 20);\n    if (id === null || id === undefined) {\n      return false;\n    }\n    console.log(id);\n    if (id != null && id != undefined) {\n      for (let i = 0; i < id.length; i++) {\n        this.ar.params.subscribe((params) => {\n          if (id[i].food.id > 20 && id[i].food.id < 35) {\n            this.ketoAdd = this.ketoser.getKetoById(id[i].food.id);\n            this.nutri = this.cartService.addDetails(this.ketoAdd, this.nutri);\n          } else if (id[i].food.id > 34) {\n            this.vegan = this.veganService.getVeganById(id[i].food.id);\n            console.log(this.vegan);\n            this.nutri = this.cartService.addDetails(this.vegan, this.nutri);\n            console.log(this.nutri);\n          }\n        })\n      }\n\n      this.nutrition = this.nutri;\n    }\n    return true;\n  }\n}\n","<form (ngSubmit)=\"confirmOrder()\">\n    <div class=\"container\">\n        <ul>\n            <li *ngFor=\"let cartItem of cart.items\">\n                <div>\n                    <img [src]=\"cartItem.food.imageUrl\" [alt]=\"cartItem.food.name\">\n                </div>\n                <div>\n                    <a routerLink=\"/food/{{cartItem.food.id}}\">\n                        {{cartItem.food.name}}\n                    </a>\n\n                </div>\n                <div>\n                    <!-- //to select items// -->\n                    <select #quantitySelect (change)=\"changeQuantity(cartItem, quantitySelect.value)\">\n                        <option>1</option>\n                        <option>2</option>\n                        <option>3</option>\n                        <option>4</option>\n                        <option>5</option>\n                        <option>6</option>\n                    </select>\n                </div>\n                <div>\n                    {{cartItem.price |currency:'INR'}}\n                </div>\n                <div>\n                    <button class=\"remove-button\" (click)=\"removeFromCart(cartItem)\">\n                        Remove\n                    </button>\n                </div>\n            </li>\n\n        </ul>\n        <div class=\"checkout\">\n            <div class=\"food-count\">\n                {{cart.items.length}}\n            </div>\n            <div class=\" total-price\">\n                {{cart.totalPrice | currency:'INR'}}\n            </div>\n            <div *ngIf=\"displayNutrition()\">\n                <table>\n                    <tbody>\n                        <tr>\n                            <th>Carbs</th>\n                            <td>{{nutrition.carbs}} g</td>\n                        </tr>\n                    <!-- </tbody>\n                    <tbody> -->\n                        <tr>\n                            <th>Protein</th>\n                            <td>{{nutrition.protein}} g</td>\n                        </tr>\n                    <!-- </tbody>\n                    <tbody> -->\n                        <tr>\n                            <th>Fat</th>\n                            <td>{{nutrition.fat}} g</td>\n                        </tr>\n                    <!-- </tbody>\n                    <tbody> -->\n                        <tr>\n                            <th>Total Calories</th>\n                            <td>{{nutrition.calories}} kcals</td>\n                        </tr>\n                    </tbody>\n\n                </table>\n            </div>\n            <div>\n                <button type=\"submit\">CONFIRM ORDER</button>\n            </div>\n\n        </div>\n\n    </div>\n</form>"]},"metadata":{},"sourceType":"module"}